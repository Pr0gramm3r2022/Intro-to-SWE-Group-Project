using System;
using System.Collections.Generic;
using System.IO;

namespace Profile_SalesRep_Customer
{
    internal class Sales_Rep : Profile
    {
        public List<Customer> customers = new List<Customer>();

        public Sales_Rep(string user, string pass, string name) : base(user, pass) 
        {
            username = user;
            password = pass;
            Name = name;
        }

        public void AddCustomer(int customerId, string customerName)
        {
            foreach (Customer customer in customers) 
            {
                if(customerId == customer.ID)
                {
                    Console.WriteLine("Customer already exists.");
                    return;
                }
            }

            customers.Add(new Customer { ID = customerId, Name = customerName });
        }

        public void RemoveCustomer(int customerId)
        {
            foreach (Customer customer in customers)
            {
                if (customerId == customer.ID)
                {
                    customers.Remove(customer);
                    return;
                }
            }
            Console.WriteLine("Customer not found.");
        }

        public void SaveCustomers()
        {
            string path = "C:\\Users\\uzowi\\source\\repos\\Profile-SalesRep-Customer\\ListofCustomers\\customers.txt";

            try
            {
                using (StreamWriter save = new StreamWriter(path)) 
                {
                    foreach (Customer c in customers)
                    {
                        save.WriteLine($"{c.ID}, {c.Name}");
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine($"Something went wrong. {e.Message}");
            }
        }
        
        public void LoadCustomers()
        {
            string path = "C:\\Users\\uzowi\\source\\repos\\Profile-SalesRep-Customer\\ListofCustomers\\customers.txt";

            try
            {
                if (File.Exists(path))
                {
                    using (StreamReader load = new StreamReader(path))
                    {
                        string loadFile;
                        customers.Clear();

                        while ((loadFile = load.ReadLine()) != null)
                        {
                            var content = loadFile.Split(',');

                            if (content.Length == 2)
                            {
                                customers.Add(new Customer { ID = Convert.ToInt32(content[0]), Name = content[1] });
                            }
                            else
                            {
                                Console.WriteLine("Invalid file format.");
                            }
                        }
                    }
                }
                else
                {
                    Console.WriteLine("File does not exist.");
                }
            }
            catch (IOException i)
            {
                Console.WriteLine($"An error occurred. {i.Message}");
            }
            catch (Exception e) 
            {
                Console.WriteLine($"Something went wrong. {e.Message}");
            }
        }
    }
}
using System;
using System.Windows.Forms;
using Profile_SalesRep_Customer;

namespace introproject
{
    public partial class Salesrepmanagement : Form
    {
        private Sales_Rep salesRep;

        public Salesrepmanagement()
        {
            InitializeComponent();
            salesRep = new Sales_Rep("username", "password", "Sales Rep Name");
        }

        private void Salesrepmanagement_Load(object sender, EventArgs e)
        {
            // Load customers when the form loads
            salesRep.LoadCustomers();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Add New Sales Representative
            // You can prompt for more details if necessary
            int customerId = Convert.ToInt32(textBox1.Text);
            string customerName = "Customer Name"; // This can be fetched from another input field
            salesRep.AddCustomer(customerId, customerName);
            salesRep.SaveCustomers();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            // Search for a Sales Representative by ID
            int customerId = Convert.ToInt32(textBox1.Text);
            Customer foundCustomer = salesRep.customers.Find(c => c.ID == customerId);
            if (foundCustomer != null)
            {
                MessageBox.Show($"Customer found: {foundCustomer.Name}");
            }
            else
            {
                MessageBox.Show("Customer not found.");
            }
        }

        private void button3_Click(object sender, EventArgs e)
        {
            // View All Sales Representatives
            string allCustomers = string.Join(Environment.NewLine, salesRep.customers.Select(c => $"ID: {c.ID}, Name: {c.Name}"));
            MessageBox.Show(allCustomers, "All Sales Representatives");
        }

        private void button4_Click(object sender, EventArgs e)
        {
            // Back button logic
            this.Close();
        }

        private void button5_Click(object sender, EventArgs e)
        {
            // Logout button logic
            this.Close();
        }

        private void InitializeComponent()
        {
            System.ComponentModel.ComponentResourceManager resources = new System.ComponentModel.ComponentResourceManager(typeof(Salesrepmanagement));
            this.panel1 = new System.Windows.Forms.Panel();
            this.pictureBox1 = new System.Windows.Forms.PictureBox();
            this.panel2 = new System.Windows.Forms.Panel();
            this.button1 = new System.Windows.Forms.Button();
            this.label1 = new System.Windows.Forms.Label();
            this.textBox1 = new System.Windows.Forms.TextBox();
            this.button2 = new System.Windows.Forms.Button();
            this.label2 = new System.Windows.Forms.Label();
            this.button3 = new System.Windows.Forms.Button();
            this.button4 = new System.Windows.Forms.Button();
            this.button5 = new System.Windows.Forms.Button();
            this.panel1.SuspendLayout();
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).BeginInit();
            this.SuspendLayout();
            // 
            // panel1
            // 
            this.panel1.BackColor = System.Drawing.SystemColors.ActiveCaption;
            this.panel1.Controls.Add(this.pictureBox1);
            this.panel1.Location = new System.Drawing.Point(0, 0);
            this.panel1.Name = "panel1";
            this.panel1.Size = new System.Drawing.Size(1076, 60);
            this.panel1.TabIndex = 3;
            // 
            // pictureBox1
            // 
            this.pictureBox1.Image = ((System.Drawing.Image)(resources.GetObject("pictureBox1.Image")));
            this.pictureBox1.Location = new System.Drawing.Point(357, 3);
            this.pictureBox1.Name = "pictureBox1";
            this.pictureBox1.Size = new System.Drawing.Size(100, 50);
            this.pictureBox1.SizeMode = System.Windows.Forms.PictureBoxSizeMode.Zoom;
            this.pictureBox1.TabIndex = 0;
            this.pictureBox1.TabStop = false;
            // 
            // panel2
            // 
            this.panel2.BackColor = System.Drawing.SystemColors.ActiveCaption;
            this.panel2.Location = new System.Drawing.Point(0, 392);
            this.panel2.Name = "panel2";
            this.panel2.Size = new System.Drawing.Size(1032, 60);
            this.panel2.TabIndex = 4;
            // 
            // button1
            // 
            this.button1.BackColor = System.Drawing.SystemColors.ActiveCaption;
            this.button1.Location = new System.Drawing.Point(296, 115);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(229, 23);
            this.button1.TabIndex = 5;
            this.button1.Text = "Add New Sales Representative";
            this.button1.UseVisualStyleBackColor = false;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // label1
            // 
            this.label1.AutoSize = true;
            this.label1.Location = new System.Drawing.Point(319, 159);
            this.label1.Name = "label1";
            this.label1.Size = new System.Drawing.Size(181, 13);
            this.label1.TabIndex = 6;
            this.label1.Text = "Modify Existing Sales Representative";
            // 
            // textBox1
            // 
            this.textBox1.Location = new System.Drawing.Point(296, 190);
            this.textBox1.Name = "textBox1";
            this.textBox1.Size = new System.Drawing.Size(229, 20);
            this.textBox1.TabIndex = 7;
            // 
            // button2
            // 
            this.button2.BackColor = System.Drawing.SystemColors.ActiveBorder;
            this.button2.Location = new System.Drawing.Point(531, 188);
            this.button2.Name = "button2";
            this.button2.Size = new System.Drawing.Size(75, 23);
            this.button2.TabIndex = 8;
            this.button2.Text = "Search";
            this.button2.UseVisualStyleBackColor = false;
            this.button2.Click += new System.EventHandler(this.button2_Click);
            // 
            // label2
            // 
            this.label2.AutoSize = true;
            this.label2.Location = new System.Drawing.Point(189, 193);
            this.label2.Name = "label2";
            this.label2.Size = new System.Drawing.Size(101, 13);
            this.label2.TabIndex = 9;
            this.label2.Text = "Enter Sales Rep ID:";
            // 
            // button3
            // 
            this.button3.BackColor = System.Drawing.SystemColors.ActiveCaption;
            this.button3.Location = new System.Drawing.Point(296, 241);
            this.button3.Name = "button3";
            this.button3.Size = new System.Drawing.Size(229, 23);
            this.button3.TabIndex = 10;
            this.button3.Text = "View All Sales Representatives";
            this.button3.UseVisualStyleBackColor = false;
            this.button3.Click += new System.EventHandler(this.button3_Click);
            // 
            // button4
            // 
            this.button4.BackColor = System.Drawing.SystemColors.ActiveCaption;
            this.button4.Location = new System.Drawing.Point(847, 78);
            this.button4.Name = "button4";
            this.button4.Size = new System.Drawing.Size(75, 23);
            this.button4.TabIndex = 11;
            this.button4.Text = "Back";
            this.button4.UseVisualStyleBackColor = false;
            this.button4.Click += new System.EventHandler(this.button4_Click);
            // 
            // button5
            // 
            this.button5.BackColor = System.Drawing.SystemColors.ActiveCaption;
            this.button5.Location = new System.Drawing.Point(928, 78);
            this.button5.Name = "button5";
            this.button5.Size = new System.Drawing.Size(75, 23);
            this.button5.TabIndex = 12;
            this.button5.Text = "Logout";
            this.button5.UseVisualStyleBackColor = false;
            this.button5.Click += new System.EventHandler(this.button5_Click);
            // 
            // Salesrepmanagement
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(1030, 450);
            this.Controls.Add(this.button5);
            this.Controls.Add(this.button4);
            this.Controls.Add(this.button3);
            this.Controls.Add(this.label2);
            this.Controls.Add(this.button2);
            this.Controls.Add(this.textBox1);
            this.Controls.Add(this.label1);
            this.Controls.Add(this.button1);
            this.Controls.Add(this.panel2);
            this.Controls.Add(this.panel1);
            this.Name = "Salesrepmanagement";
            this.Text = "Salesrepmanagement";
            this.Load += new System.EventHandler(this.Salesrepmanagement_Load);
            this.panel1.ResumeLayout(false);
            ((System.ComponentModel.ISupportInitialize)(this.pictureBox1)).EndInit();
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        private System.Windows.Forms.Panel panel1;
        private System.Windows.Forms.PictureBox pictureBox1;
        private System.Windows.Forms.Panel panel2;
        private System.Windows.Forms.Button button1;
        private System.Windows.Forms.Label label1;
        private System.Windows.Forms.TextBox textBox1;
        private System.Windows.Forms.Button button2;
        private System.Windows.Forms.Label label2;
        private System.Windows.Forms.Button button3;
        private System.Windows.Forms.Button button4;
        private System.Windows.Forms.Button button5;
    }
}
